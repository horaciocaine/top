<div id="failures-byreference">


  <h1 class="topictitle1">Getting Failures By-reference</h1>

  
  
  <div>
<p>
    Collecting delivery failures by-reference with the <samp class="codeph">send()</samp> or
    <samp class="codeph">batchSend()</samp> methods is as simple as passing a variable name to
    the method call.
  </p>

    <div class="section">
      <p>
        To get failed recipients by-reference:
      </p>

    </div>

    
      <div class="p">
        <span>
          Pass a by-reference variable name to the <samp class="codeph">send()</samp> or <samp class="codeph">batchSend()</samp>
          methods of the Mailer class.
        </span>
      </div>

    
    
    <div class="section">
      <p>
        If the Transport rejects any of the recipients, the culprit addresses will be added to the
        array provided by-reference.
      </p>

      <div class="note">
<span class="notetitle">Note:</span> 
        If the variable name does not yet exist, it will be initialized as an empty array and then
        failures will be added to that array.  If the variable already exists it will be type-cast to
        an array and failures will be added to it.
      </div>

    </div>

    
    <div class="example" id="failures-byreference__mailer_failures_byreference">
<pre class="kodify php">
$mailer = Swift_Mailer::newInstance( ... );

$message = Swift_Message::newInstance( ... )
  -&gt;setFrom( ... )
  -&gt;setTo(array(
    'receiver@bad-domain.org' =&gt; 'Receiver Name',
    'other@domain.org' =&gt; 'A name',
    'other-receiver@bad-domain.org' =&gt; 'Other Name'
  ))
  -&gt;setBody( ... )
  ;
  
//Pass a variable name to the send() method
if (!$mailer-&gt;send($message, $failures))
{
  echo "Failures:";
  print_r($failures);
}

/*
Failures:
Array (
  0 =&gt; receiver@bad-domain.org,
  1 =&gt; other-receiver@bad-domain.org
)
*/

</pre>

    </div>

    
  </div>

<div>
<div class="familylinks">
<div class="parentlink">
<strong>Parent topic:</strong> <a href="finding-failures" title="It's possible to get a list of addresses that were rejected by the Transport by using a by-reference parameter to send() or batchSend().">Finding out Rejected Addresses</a>
</div>
</div>
</div>

</div>
